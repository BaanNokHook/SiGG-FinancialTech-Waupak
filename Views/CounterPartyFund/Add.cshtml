@model GM.Data.Model.CounterParty.CounterPartyFundModel
@{
    ViewBag.Title = "Add";
    Layout = "~/Views/Shared/MainLayout.cshtml";
    bool isUpdate = IsUpdate;
    var ErrorMessage = ViewBag.Message;
}

<section class="working-content two-nav-padding" data-spy="scroll" data-target="#counterparty-scrollspy" data-offset="200">
    <div class="container-fluid container-fixed">
        @using (Html.BeginForm())
        {
            <!--Second Navbar-->
            <nav id="counterparty-scrollspy" class="navbar navbar-defult top-navbar section-nav-wrapper">
                <div class="navbar-wrapper sub-topnav section-nav">
                    <ul class="nav navbar-nav">
                        <li class="active" id="detail-li">
                            <a href="#counterpartyfund-detail" onclick="expandpanel('detail')">Detail</a>
                        </li>
                        <li id="identify-li">
                            <a href="#counterpartyfund-identify" onclick="expandpanel('identify')">Identify</a>
                        </li>
                        <li id="payment-li">
                            <a href="#counterpartyfund-payment" onclick="expandpanel('payment')">Payment</a>
                        </li>
                        <li id="margin-li">
                            <a href="#counterpartyfund-margin" onclick="expandpanel('margin')">Margin</a>
                        </li>
                        <li>
                            <div class="vertical-line"></div>
                        </li>
                        <li class="submit-nav">

                            @if (Model.statusdata == "New")
                            {
                                <button type="submit" class="btn btn-link">Submit</button>
                            }
                            else
                            {
                                <button type="submit" class="btn btn-link" @(!isUpdate ? "disabled" : "")>Submit</button>
                            }
                            <button class="btn btn-link" type="button" onclick="location.href='@Url.Action("Index", "CounterPartyFund")'">Back</button>
                        </li>
                    </ul>
                </div>
            </nav>
            <!-- PageTitle -->
            <div class="row row-fixed">
                <div class="col-lg-12 col-fixed">
                    <div class="page-title">
                        <div class="breadcrumb-wrap">
                            <ol class="breadcrumb" id="NavBar">
                                @*<li>
                                    <a href="..\Home\Index">Home</a>
                                </li>
                                <li class="active">Static Process</li>
                                <li class="active">Counter Party</li>
                                <li class="active">Counter Party Fund</li>*@
                            </ol>
                        </div>
                        <div class="title">
                            <h1>
                                Counter Party Fund Detail
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Content Zone -->
            <div class="row row-fixed">
                <div class="col-xs-12 col-fixed">
                    @*@Html.ValidationSummary()*@
                    <div class="box-outside no-padding">
                        <div class="header-row">
                            <div class="deal-status left-content">
                                <span>Security Status :</span>
                                @if (Model.statusdata == "New")
                                {
                                    <span id="newdata" class="label label-new">New</span>
                                    <span id="active" class="label label-accept" style="display:none">Active</span>
                                    <span id="unapprove" class="label label-unaccept" style="display:none">UnApprove</span>
                                    <span id="unactivedata" class="label label-unaccept" style="display:none">UnActive</span>
                                }
                                else
                                {
                                    if (Model.active_flag == true)
                                    {
                                        <span id="newdata" class="label label-new" style="display:none">New</span>
                                        <span id="active" class="label label-accept">Active</span>
                                        <span id="unapprove" class="label label-unaccept" style="display:none">UnApprove</span>
                                        <span id="unactivedata" class="label label-unaccept" style="display:none">UnActive</span>
                                    }
                                    else if (Model.active_flag == false)
                                    {
                                        <span id="newdata" class="label label-new" style="display:none">New</span>
                                        <span id="active" class="label label-accept" style="display:none">Active</span>
                                        <span id="unapprove" class="label label-unaccept" style="display:none">UnApprove</span>
                                        <span id="unactivedata" class="label label-unaccept">UnActive</span>
                                    }
                                }
                                <div class="vertical-line"></div>
                                <div class="dropdown">
                                    <button class="btn btn-default dropdown-toggle btn-round" id="ddlstatuscounterparty" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                        @Html.SpanFor(model => model.statusdata, "Change", new { @class = "selected-data" })
                                        @Html.TextBoxFor(model => model.statusdata, htmlAttributes: new { @class = "selected-value hidden" })
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu" id="statuscounterparty">
                                        <li>
                                            <a onclick="Setstatus('Active')">Active</a>
                                        </li>
                                        <li>
                                            <a onclick="Setstatus('UnActive')">UnActive</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Counter Party Fund Detail -->
                    <div id="counterpartyfund-detail" class="box-content no-padding">
                        <div id="counterpartyfund-detail-icon" class="box-header big-head expand-able" aria-expanded="true" data-toggle="collapse" data-target="#counterpartyfund-detail-form">
                            <div class="left-item">
                                <div class="title">
                                    <i class="feather-icon icon-minus"></i><h3>Security Detail</h3>
                                </div>
                            </div>
                        </div>
                        <div id="counterpartyfund-detail-form" class="form-container form-horizontal have-head collapse in">
                            <div class="row">
                                <div class="col-xs-12 form-wrapper-1100">
                                    <div class="form-group-wrapper">
                                        @Html.HiddenFor(model => model.fund_id)
                                        @Html.HiddenFor(model => model.page_name)
                                        <div class="form-group">
                                            @Html.LabelForRequired(model => model.counter_party_code, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" id="ddl_counterparty" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        @Html.SpanFor(model => model.counter_party_code, "Select...", new { @class = "selected-data" })
                                                        @Html.TextBoxFor(model => model.counter_party_id, htmlAttributes: new { @class = "selected-value hidden" })
                                                        @Html.TextBoxFor(model => model.counter_party_code, htmlAttributes: new { @class = "selected-data hidden" })
                                                        <span class="caret"></span>
                                                    </button>
                                                    <div class="dropdown-menu">
                                                        <div class="search-dropdown-menu">
                                                            <input type="text" data-action="@Url.Action("FillCounterParty", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_counterparty" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                            <i class="feather-icon icon-search"></i>
                                                        </div>
                                                        <hr>
                                                        <ul id="ul_counterparty"></ul>
                                                    </div>
                                                    @Html.ValidationMessageFor(model => model.counter_party_id, "", new { @class = "text-danger" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.counter_party_name, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-10">
                                                @Html.TextBoxFor(model => model.counter_party_name, new { @class = "form-control", @readonly = "true" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.fund_code, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-10">
                                                @Html.EditorForValidate(model => model.fund_code, new { htmlAttributes = new { @class = "form-control" } })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.title_name, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" id="ddl_title" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        @Html.SpanFor(model => model.title_name, "Select...", new { @class = "selected-data" })
                                                        @Html.TextBoxFor(model => model.title, htmlAttributes: new { @class = "selected-value hidden" })
                                                        @Html.TextBoxFor(model => model.title_name, htmlAttributes: new { @class = "selected-data hidden" })
                                                        <span class="caret"></span>
                                                    </button>
                                                    <div class="dropdown-menu">
                                                        <div class="search-dropdown-menu">
                                                            <input type="text" data-action="@Url.Action("FillTitle", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_title" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                            <i class="feather-icon icon-search"></i>
                                                        </div>
                                                        <hr>
                                                        <ul id="ul_title"></ul>
                                                    </div>
                                                </div>
                                            </div>
                                            @Html.LabelFor(model => model.title_name2, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.EditorForValidate(model => model.title_name2, new { htmlAttributes = new { @class = "form-control", @readonly = "readonly" } })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.first_name, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.first_name, new { @class = "form-control", rows = "3" })
                                            </div>
                                            @Html.LabelFor(model => model.middle_name, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.middle_name, new { @class = "form-control", rows = "3" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.last_name, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.last_name, new { @class = "form-control", rows = "3" })
                                            </div>
                                            @Html.LabelForRequired(model => model.fund_thainame, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.fund_thainame, new { @class = "form-control", rows = "3" })
                                                @Html.ValidationMessageFor(model => model.fund_thainame, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelForRequired(model => model.fund_engname, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.fund_engname, new { @class = "form-control", rows = "3" })
                                                @Html.ValidationMessageFor(model => model.fund_engname, "", new { @class = "text-danger" })
                                            </div>
                                            @Html.LabelFor(model => model.bb_firm_acc, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.bb_firm_acc, new { @class = "form-control", rows = "3" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.custodian_id, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" id="ddl_custodian" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        @Html.SpanFor(model => model.custodian_code, "Select...", new { @class = "selected-data" })
                                                        @Html.TextBoxFor(model => model.custodian_id, htmlAttributes: new { @class = "selected-value hidden" })
                                                        @Html.TextBoxFor(model => model.custodian_code, htmlAttributes: new { @class = "selected-data hidden" })
                                                        <span class="caret"></span>
                                                    </button>
                                                    <div class="dropdown-menu">
                                                        <div class="search-dropdown-menu">
                                                            <input type="text" data-action="@Url.Action("FillCustodian", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_custodian" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                            <i class="feather-icon icon-search"></i>
                                                        </div>
                                                        <hr>
                                                        <ul id="ul_custodian"></ul>
                                                    </div>
                                                </div>
                                            </div>
                                            @Html.LabelFor(model => model.bic_code_fund, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.bic_code_fund, new { @class = "form-control", rows = "3" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.sa_account_no, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.sa_account_no, new { @class = "form-control", rows = "3" })
                                            </div>
                                            @Html.LabelFor(model => model.ca_account_no, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.ca_account_no, new { @class = "form-control", rows = "3" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.group_tax_code, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" id="ddl_fund_type" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        @Html.SpanFor(model => model.group_tax_code_name, "Select...", new { @class = "selected-data" })
                                                        @Html.TextBoxFor(model => model.group_tax_code, htmlAttributes: new { @class = "selected-value hidden" })
                                                        @Html.TextBoxFor(model => model.group_tax_code_name, htmlAttributes: new { @class = "selected-data hidden" })
                                                        <span class="caret"></span>
                                                    </button>
                                                    <div class="dropdown-menu">
                                                        <div class="search-dropdown-menu">
                                                            <input type="text" data-action="@Url.Action("FillFundType", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_fund_type" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                            <i class="feather-icon icon-search"></i>
                                                        </div>
                                                        <hr>
                                                        <ul id="ul_fund_type"></ul>
                                                    </div>
                                                </div>
                                            </div>
                                            @Html.LabelFor(model => model.tax_id, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.tax_id, new { @class = "form-control", rows = "3" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.wth_tax_percent, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.EditorForValidate(model => model.wth_tax_percent, new { htmlAttributes = new { @type = "money", @class = "form-control" } })
                                                @Html.ValidationMessageFor(model => model.wth_tax_percent, "", new { @class = "text-danger" })
                                            </div>
                                            @Html.LabelFor(model => model.cif_no, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.TextBoxFor(model => model.cif_no, new { @class = "form-control", rows = "3" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Counter Party Fund Identify -->
                    <div id="counterpartyfund-identify" class="box-content no-padding">
                        <div id="counterpartyfund-identify-icon" class="box-header big-head expand-able" aria-expanded="true" data-toggle="collapse" data-target="#counterpartyfund-identify-form">
                            <div class="left-item">
                                <div class="title">
                                    <i class="feather-icon icon-plus"></i><h3>Counter Party Fund Identify</h3>
                                </div>
                            </div>
                        </div>
                        <div id="counterpartyfund-identify-form" class="form-container form-horizontal have-head collapse in">
                            <div class="row">
                                <div class="col-xs-12 form-wrapper-1100">
                                    <div class="col-xs-12 form-sub-title col-form-fix">
                                    </div>
                                </div>
                                <div class="col-xs-12 item-panel-table-wrapper">
                                    <table class="item-panel-table" id="tbIdentify">
                                        <thead>
                                        <th>Unique ID</th>
                                        <th>Identify Type</th>
                                        <th>Identify No</th>
                                        <th>Juris Reg Date</th>
                                        <th>Reg Bus Ename</th>
                                        <th>Reg Bus Tname</th>
                                        <th></th>
                                        <th class="action"></th>
                                        </thead>
                                        <tbody>
                                            @if (Model.Identify != null && Model.Identify.Count > 0)
                                            {
                                                var rowindex = 0;
                                                foreach (var Identify in Model.Identify)
                                                {
                                                    if (@Identify.unique_id != null)
                                                    {
                                                        @Html.HiddenFor(model => Identify.counter_party_id);

                                                        if (@Identify.rowstatus == "delete")
                                                        {
                                                            <tr data-id="@rowindex" data-action="fromdatabase" style="display: none">
                                                                <td class="long-data">
                                                                    @Identify.unique_name
                                                                    <input name="Identify[@rowindex].unique_id" type="hidden" value="@Identify.unique_id" valuefield="IdentifyRightModal.unique_id" textvalue="@Identify.unique_name" textfield="IdentifyRightModal.unique_name" isdropdown="true">
                                                                    <input name="Identify[@rowindex].unique_name" type="hidden" value="@Identify.unique_name" valuefield="IdentifyRightModal.unique_id" textvalue="@Identify.unique_name" textfield="IdentifyRightModal.unique_name" isdropdown="true">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Identify.identify_type_text
                                                                    <input name="Identify[@rowindex].identify_type" type="hidden" value="@Identify.identify_type" valuefield="IdentifyRightModal.identify_type" textvalue="@Identify.identify_type_text" textfield="IdentifyRightModal.identify_type_text" isdropdown="true">
                                                                    <input name="Identify[@rowindex].identify_type_text" type="hidden" value="@Identify.identify_type_text" valuefield="IdentifyRightModal.identify_type" textvalue="@Identify.identify_type_text" textfield="IdentifyRightModal.identify_type_text" isdropdown="true">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Identify.identify_no
                                                                    <input name="Identify[@rowindex].identify_no" type="hidden" value="@Identify.identify_no" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Identify.juris_reg_date
                                                                    <input name="Identify[@rowindex].juris_reg_date" type="hidden" value="@Identify.juris_reg_date" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Identify.reg_bus_ename
                                                                    <input name="Identify[@rowindex].reg_bus_ename" type="hidden" value="@Identify.reg_bus_ename" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Identify.reg_bus_tname
                                                                    <input name="Identify[@rowindex].reg_bus_tname" type="hidden" value="@Identify.reg_bus_tname" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    <input name="Identify[@rowindex].rowstatus" type="hidden" value="@Identify.rowstatus" isdropdown="false">
                                                                </td>
                                                                <td class="action">
                                                                    <button class="btn btn-default btn-round icon-only" type="button" data-id="@Identify.unique_id" data-action="update" onclick="GM.CounterpartyFund.Identify.Form.Show(this)" @(!isUpdate ? "disabled" : "")>
                                                                        <i class="feather-icon icon-edit"></i>
                                                                    </button>
                                                                    <button class="btn btn-delete btn-round icon-only" type="button" data-id="@Identify.unique_id" data-action="delete" onclick="GM.CounterpartyFund.Identify.Form.Show(this)" @(!isUpdate ? "disabled" : "")>
                                                                        <i class="feather-icon icon-trash-2"></i>
                                                                    </button>

                                                                </td>
                                                            </tr>
                                                        }
                                                        else
                                                        {
                                                            <tr data-id="@rowindex" data-action="fromdatabase">
                                                                <td class="long-data">
                                                                    @Identify.unique_name
                                                                    <input name="Identify[@rowindex].unique_id" type="hidden" value="@Identify.unique_id" valuefield="IdentifyRightModal.unique_id" textvalue="@Identify.unique_name" textfield="IdentifyRightModal.unique_name" isdropdown="true">
                                                                    <input name="Identify[@rowindex].unique_name" type="hidden" value="@Identify.unique_name" valuefield="IdentifyRightModal.unique_id" textvalue="@Identify.unique_name" textfield="IdentifyRightModal.unique_name" isdropdown="true">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Identify.identify_type_text
                                                                    <input name="Identify[@rowindex].identify_type" type="hidden" value="@Identify.identify_type" valuefield="IdentifyRightModal.identify_type" textvalue="@Identify.identify_type_text" textfield="IdentifyRightModal.identify_type_text" isdropdown="true">
                                                                    <input name="Identify[@rowindex].identify_type_text" type="hidden" value="@Identify.identify_type_text" valuefield="IdentifyRightModal.identify_type" textvalue="@Identify.identify_type_text" textfield="IdentifyRightModal.identify_type_text" isdropdown="true">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Identify.identify_no
                                                                    <input name="Identify[@rowindex].identify_no" type="hidden" value="@Identify.identify_no" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Identify.juris_reg_date
                                                                    <input name="Identify[@rowindex].juris_reg_date" type="hidden" value="@Identify.juris_reg_date" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Identify.reg_bus_ename
                                                                    <input name="Identify[@rowindex].reg_bus_ename" type="hidden" value="@Identify.reg_bus_ename" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Identify.reg_bus_tname
                                                                    <input name="Identify[@rowindex].reg_bus_tname" type="hidden" value="@Identify.reg_bus_tname" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    <input name="Identify[@rowindex].rowstatus" type="hidden" value="@Identify.rowstatus" isdropdown="false">
                                                                </td>
                                                                <td class="action">
                                                                    <button class="btn btn-default btn-round icon-only" type="button" data-id="@Identify.unique_id" data-action="update" onclick="GM.CounterpartyFund.Identify.Form.Show(this)" @(!isUpdate ? "disabled" : "")>
                                                                        <i class="feather-icon icon-edit"></i>
                                                                    </button>
                                                                    <button class="btn btn-delete btn-round icon-only" type="button" data-id="@Identify.unique_id" data-action="delete" onclick="GM.CounterpartyFund.Identify.Form.Show(this)" @(!isUpdate ? "disabled" : "")>
                                                                        <i class="feather-icon icon-trash-2"></i>
                                                                    </button>

                                                                </td>
                                                            </tr>
                                                        }

                                                        rowindex++;
                                                    }
                                                    else
                                                    {
                                                        <tr>
                                                            <td class="long-data text-center empty-data" style="height:50px;" colspan="7"> No data.</td>
                                                        </tr>

                                                    }
                                                }
                                            }
                                            else
                                            {
                                                <tr>
                                                    <td class="long-data text-center empty-data" style="height:50px;" colspan="7"> No data.</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>

                                </div>
                                <div class="col-xs-12 form-button">
                                    @if (Model.statusdata == "New")
                                    {
                                        <button class="btn btn-default btn-round btn-big" type="button" data-action="create" id="btnIdentifyCreate">
                                            <i class="feather-icon icon-plus"></i>Add Identify
                                        </button>
                                    }
                                    else
                                    {
                                        <button class="btn btn-default btn-round btn-big" type="button" data-action="create" id="btnIdentifyCreate" @(!isUpdate ? "disabled" : "")>
                                            <i class="feather-icon icon-plus"></i>Add Identify
                                        </button>
                                    }

                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Counter Party Payment -->
                    <div id="counterpartyfund-payment" class="box-content no-padding">
                        <div id="counterpartyfund-payment-icon" class="box-header big-head expand-able" aria-expanded="true" data-toggle="collapse" data-target="#counterpartyfund-payment-form">
                            <div class="left-item">
                                <div class="title">
                                    <i class="feather-icon icon-plus"></i><h3>Counter Party Fund Payment</h3>
                                </div>
                            </div>
                        </div>
                        <div id="counterpartyfund-payment-form" class="form-container form-horizontal have-head collapse in">
                            <div class="row">
                                <div class="col-xs-12 form-wrapper-1100">
                                    <div class="col-xs-12 form-sub-title col-form-fix">
                                    </div>
                                </div>
                                <div class="col-xs-12 item-panel-table-wrapper">
                                    <table class="item-panel-table" id="tbPayment">
                                        <thead>
                                        <th>Account Type</th>
                                        <th>Bank Name</th>
                                        <th>Payment Method</th>
                                        <th>Account No</th>
                                        <th>CA No</th>
                                        <th>SA No</th>
                                        <th>Participant ID</th>
                                        <th></th>
                                        <th class="action"></th>
                                        </thead>
                                        <tbody>
                                            @if (Model.Payment != null && Model.Payment.Count > 0)
                                            {
                                                var rowindex = 0;
                                                foreach (var Payment in Model.Payment)
                                                {
                                                    if (@Payment.payment_method != null)
                                                    {
                                                        @Html.HiddenFor(model => Payment.counter_party_id);
                                                        if (Payment.rowstatus == "delete")
                                                        {
                                                            <tr data-id="@rowindex" data-action="fromdatabase" style="display: none">
                                                                <td class="long-data">
                                                                    @Payment.nosto_vosto_name
                                                                    <input name="Payment[@rowindex].nosto_vosto_code" type="hidden" value="@Payment.nosto_vosto_code" valuefield="PaymentRightModal.nosto_vosto_code" textvalue="@Payment.nosto_vosto_name" textfield="PaymentRightModal.nosto_vosto_name" isdropdown="true">
                                                                    <input name="Payment[@rowindex].nosto_vosto_name" type="hidden" value="@Payment.nosto_vosto_name" valuefield="PaymentRightModal.nosto_vosto_code" textvalue="@Payment.nosto_vosto_name" textfield="PaymentRightModal.nosto_vosto_name" isdropdown="true">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.bank_name
                                                                    <input name="Payment[@rowindex].bank_code" type="hidden" value="@Payment.bank_code" valuefield="PaymentRightModal.bank_code" textvalue="@Payment.bank_name" textfield="PaymentRightModal.bank_name" isdropdown="true">
                                                                    <input name="Payment[@rowindex].bank_name" type="hidden" value="@Payment.bank_name" valuefield="PaymentRightModal.bank_code" textvalue="@Payment.bank_name" textfield="PaymentRightModal.bank_name" isdropdown="true">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.payment_method_name
                                                                    <input name="Payment[@rowindex].payment_method" type="hidden" value="@Payment.payment_method" valuefield="PaymentRightModal.payment_method" textvalue="@Payment.payment_method_name" textfield="PaymentRightModal.payment_method_name" isdropdown="true">
                                                                    <input name="Payment[@rowindex].payment_method_name" type="hidden" value="@Payment.payment_method_name" valuefield="PaymentRightModal.payment_method" textvalue="@Payment.payment_method_name" textfield="PaymentRightModal.payment_method_name" isdropdown="true">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.account_number
                                                                    <input name="Payment[@rowindex].account_number" type="hidden" value="@Payment.account_number " isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.ca_no
                                                                    <input name="Payment[@rowindex].ca_no" type="hidden" value="@Payment.ca_no" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.sa_no
                                                                    <input name="Payment[@rowindex].sa_no" type="hidden" value="@Payment.sa_no" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.participant_id
                                                                    <input name="Payment[@rowindex].participant_id" type="hidden" value="@Payment.participant_id" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    <input name="Payment[@rowindex].rowstatus" type="hidden" value="@Payment.rowstatus" isdropdown="false">
                                                                </td>
                                                                <td class="action">
                                                                    <button class="btn btn-default btn-round icon-only" type="button" data-id="@Payment.nosto_vosto_name" data-action="update" onclick="GM.CounterpartyFund.Payment.Form.Show(this)" @(!isUpdate ? "disabled" : "")>
                                                                        <i class="feather-icon icon-edit"></i>
                                                                    </button>
                                                                    <button class="btn btn-delete btn-round icon-only" type="button" data-id="@Payment.nosto_vosto_name" data-action="delete" onclick="GM.CounterpartyFund.Payment.Form.Show(this)" @(!isUpdate ? "disabled" : "")>
                                                                        <i class="feather-icon icon-trash-2"></i>
                                                                    </button>

                                                                </td>
                                                            </tr>
                                                        }
                                                        else
                                                        {
                                                            <tr data-id="@rowindex" data-action="fromdatabase">
                                                                <td class="long-data">
                                                                    @Payment.nosto_vosto_name
                                                                    <input name="Payment[@rowindex].nosto_vosto_code" type="hidden" value="@Payment.nosto_vosto_code" valuefield="PaymentRightModal.nosto_vosto_code" textvalue="@Payment.nosto_vosto_name" textfield="PaymentRightModal.nosto_vosto_name" isdropdown="true">
                                                                    <input name="Payment[@rowindex].nosto_vosto_name" type="hidden" value="@Payment.nosto_vosto_name" valuefield="PaymentRightModal.nosto_vosto_code" textvalue="@Payment.nosto_vosto_name" textfield="PaymentRightModal.nosto_vosto_name" isdropdown="true">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.bank_name
                                                                    <input name="Payment[@rowindex].bank_code" type="hidden" value="@Payment.bank_code" valuefield="PaymentRightModal.bank_code" textvalue="@Payment.bank_name" textfield="PaymentRightModal.bank_name" isdropdown="true">
                                                                    <input name="Payment[@rowindex].bank_name" type="hidden" value="@Payment.bank_name" valuefield="PaymentRightModal.bank_code" textvalue="@Payment.bank_name" textfield="PaymentRightModal.bank_name" isdropdown="true">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.payment_method_name
                                                                    <input name="Payment[@rowindex].payment_method" type="hidden" value="@Payment.payment_method" valuefield="PaymentRightModal.payment_method" textvalue="@Payment.payment_method_name" textfield="PaymentRightModal.payment_method_name" isdropdown="true">
                                                                    <input name="Payment[@rowindex].payment_method_name" type="hidden" value="@Payment.payment_method_name" valuefield="PaymentRightModal.payment_method" textvalue="@Payment.payment_method_name" textfield="PaymentRightModal.payment_method_name" isdropdown="true">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.account_number
                                                                    <input name="Payment[@rowindex].account_number" type="hidden" value="@Payment.account_number " isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.ca_no
                                                                    <input name="Payment[@rowindex].ca_no" type="hidden" value="@Payment.ca_no" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.sa_no
                                                                    <input name="Payment[@rowindex].sa_no" type="hidden" value="@Payment.sa_no" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    @Payment.participant_id
                                                                    <input name="Payment[@rowindex].participant_id" type="hidden" value="@Payment.participant_id" isdropdown="false">
                                                                </td>
                                                                <td class="long-data">
                                                                    <input name="Payment[@rowindex].rowstatus" type="hidden" value="@Payment.rowstatus" isdropdown="false">
                                                                </td>
                                                                <td class="action">
                                                                    <button class="btn btn-default btn-round icon-only" type="button" data-id="@Payment.nosto_vosto_name" data-action="update" onclick="GM.CounterpartyFund.Payment.Form.Show(this)" @(!isUpdate ? "disabled" : "")>
                                                                        <i class="feather-icon icon-edit"></i>
                                                                    </button>
                                                                    <button class="btn btn-delete btn-round icon-only" type="button" data-id="@Payment.nosto_vosto_name" data-action="delete" onclick="GM.CounterpartyFund.Payment.Form.Show(this)" @(!isUpdate ? "disabled" : "")>
                                                                        <i class="feather-icon icon-trash-2"></i>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        }

                                                        rowindex++;
                                                    }
                                                    else
                                                    {
                                                        <tr>
                                                            <td class="long-data text-center empty-data" style="height:50px;" colspan="7"> No data.</td>
                                                        </tr>

                                                    }
                                                }
                                            }
                                            else
                                            {
                                                <tr>
                                                    <td class="long-data text-center empty-data" style="height:50px;" colspan="7"> No data.</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>

                                </div>
                                <div class="col-xs-12 form-button">
                                    @if (Model.statusdata == "New")
                                    {
                                        <button class="btn btn-default btn-round btn-big" type="button" data-action="create" id="btnPaymentCreate">
                                            <i class="feather-icon icon-plus"></i>Add Bank List
                                        </button>
                                    }
                                    else
                                    {
                                        <button class="btn btn-default btn-round btn-big" type="button" data-action="create" id="btnPaymentCreate" @(!isUpdate ? "disabled" : "")>
                                            <i class="feather-icon icon-plus"></i>Add Bank List
                                        </button>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Counter Party Fund Margin -->
                    <div id="counterpartyfund-margin" class="box-content no-padding">
                        <div id="counterpartyfund-margin-icon" class="box-header big-head expand-able" aria-expanded="true" data-toggle="collapse" data-target="#counterpartyfund-margin-form">
                            <div class="left-item">
                                <div class="title">
                                    <i class="feather-icon icon-plus"></i><h3>Counter Party Fund Margin</h3>
                                </div>
                            </div>
                        </div>
                        <div id="counterpartyfund-margin-form" class="form-container form-horizontal have-head collapse in">
                            <div class="row">
                                <div class="col-xs-12 form-wrapper-1100">
                                    <div class="col-xs-12 form-sub-title col-form-fix">
                                    </div>
                                    <div class="form-group-wrapper">
                                        @Html.HiddenFor(model => model.counter_party_id)
                                        <div class="form-group">
                                            @Html.LabelForRequired(model => model.margin_type_id, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" id="ddl_margin_type_id_add" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        @Html.SpanFor(model => model.margin_type_name, "Select...", new { @class = "selected-data" })
                                                        @Html.TextBoxFor(model => model.margin_type_id, htmlAttributes: new { @class = "selected-value hidden" })
                                                        @Html.TextBoxFor(model => model.margin_type_name, htmlAttributes: new { @class = "selected-data hidden" })
                                                        <span class="caret"></span>
                                                    </button>
                                                    <div class="dropdown-menu">
                                                        <div class="search-dropdown-menu">
                                                            <input type="text" data-action="@Url.Action("FillMarginType", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_margin_type_id_add" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                            <i class="feather-icon icon-search"></i>
                                                        </div>
                                                        <hr>
                                                        <ul></ul>
                                                    </div>
                                                    @Html.ValidationMessageFor(model => model.margin_type_id, "", new { @class = "text-danger" })
                                                </div>
                                            </div>
                                            @Html.LabelForRequired(model => model.margin_in_type_id, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" id="ddl_margin_in_type_id_add" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        @Html.SpanFor(model => model.margin_in_type_name, "Select...", new { @class = "selected-data" })
                                                        @Html.TextBoxFor(model => model.margin_in_type_id, htmlAttributes: new { @class = "selected-value hidden" })
                                                        @Html.TextBoxFor(model => model.margin_in_type_name, htmlAttributes: new { @class = "selected-data hidden" })
                                                        <span class="caret"></span>
                                                    </button>
                                                    <div class="dropdown-menu">
                                                        <div class="search-dropdown-menu">
                                                            <input type="text" data-action="@Url.Action("FillMarginInType", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_margin_in_type_id_add" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                            <i class="feather-icon icon-search"></i>
                                                        </div>
                                                        <hr>
                                                        <ul></ul>
                                                    </div>
                                                    @Html.ValidationMessageFor(model => model.margin_in_type_id, "", new { @class = "text-danger" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelForRequired(model => model.margin_in_term_id, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                <div class="dropdown">
                                                    <button class="btn btn-default dropdown-toggle" id="ddl_margin_in_term_id_add" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        @Html.SpanFor(model => model.margin_in_term_name, "Select...", new { @class = "selected-data" })
                                                        @Html.TextBoxFor(model => model.margin_in_term_id, htmlAttributes: new { @class = "selected-value hidden" })
                                                        @Html.TextBoxFor(model => model.margin_in_term_name, htmlAttributes: new { @class = "selected-data hidden" })
                                                        <span class="caret"></span>
                                                    </button>
                                                    <div class="dropdown-menu">
                                                        <div class="search-dropdown-menu">
                                                            <input type="text" data-action="@Url.Action("FillMarginInTerm", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_margin_in_term_id_add" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                            <i class="feather-icon icon-search"></i>
                                                        </div>
                                                        <hr>
                                                        <ul></ul>
                                                    </div>
                                                    @Html.ValidationMessageFor(model => model.margin_in_term_id, "", new { @class = "text-danger" })
                                                </div>
                                            </div>
                                            @Html.LabelForRequired(model => model.threshold, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-xs-4">
                                                @Html.EditorForValidate(model => model.threshold, new { htmlAttributes = new { @type = "money", @class = "form-control" } })
                                                @Html.ValidationMessageFor(model => model.threshold, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.LabelFor(model => model.borrow_only_flag, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-sm-4">
                                                <div class="radio-form">
                                                    <div class="radio">
                                                        <label class="radio-inline c-radio">
                                                            @Html.RadioButtonFor(m => m.borrow_only_flag, "true", htmlAttributes: new { @checked = "checked", @ischeck = "true" }) Yes
                                                        </label>
                                                        <label class="radio-inline c-radio">
                                                            @Html.RadioButtonFor(m => m.borrow_only_flag, "false", htmlAttributes: new { @ischeck = "false" }) No
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            @Html.LabelFor(model => model.except_margin_flag, htmlAttributes: new { @class = "control-label col-md-2" })
                                            <div class="col-sm-4">
                                                <div class="radio-form">
                                                    <div class="radio">
                                                        <label class="radio-inline c-radio">
                                                            @Html.RadioButtonFor(m => m.except_margin_flag, "true", htmlAttributes: new { @checked = "checked", @ischeck = "true" }) Yes
                                                        </label>
                                                        <label class="radio-inline c-radio">
                                                            @Html.RadioButtonFor(m => m.except_margin_flag, "false", htmlAttributes: new { @ischeck = "false" }) No
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 form-button">
                                    @*<button class="btn btn-default btn-round btn-big" type="button" data-action="create" id="btnPaymentCreate">
                                            <i class="feather-icon icon-plus"></i>Add Bank List
                                        </button>*@
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="security-submit" class="page-button-submit">

                        @if (Model.statusdata == "New")
                        {
                            <button type="submit" class="btn btn-primary btn-round btn-big">Submit</button>
                        }
                        else
                        {
                            <button type="submit" class="btn btn-primary btn-round btn-big" @(!isUpdate ? "disabled" : "")>Submit</button>
                        }

                        <button class="btn btn-link" @(!isUpdate ? "disabled" : "") type="reset">Clear Data</button>
                    </div>
                </div>
            </div>
        }
    </div>
</section>


<!-- Add Payment - Right Modal -->
<div class="modal right fade" id="modal-form-payment" tabindex="-1" role="dialog" aria-labelledby="edit-modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">
                        <i class="feather-icon icon-x"></i>
                    </span>
                </button>
                <h4 class="modal-title">Add Payment</h4>
            </div>
            <div class="modal-body group">
                <form id="PaymentForm">
                    <div class="form-container form-horizontal">
                        <div class="row">
                            <div class="col-xs-12 form-wrapper-max">
                                <div class="form-group">
                                    @Html.LabelForRequired(model => model.PaymentRightModal.nosto_vosto_code, htmlAttributes: new { @class = "control-label col-xs-3" })
                                    <div class="col-xs-6">
                                        <div class="dropdown">
                                            <button class="btn btn-default dropdown-toggle" id="ddl_account_type_banklist" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                @Html.SpanFor(model => model.PaymentRightModal.nosto_vosto_name, "Select...", new { @class = "selected-data" })
                                                @Html.TextBoxFor(model => model.PaymentRightModal.nosto_vosto_code, htmlAttributes: new { @class = "selected-value hidden" })
                                                @Html.TextBoxFor(model => model.PaymentRightModal.nosto_vosto_name, htmlAttributes: new { @class = "selected-data hidden" })
                                                <span class="caret"></span>
                                            </button>
                                            <div class="dropdown-menu">
                                                <div class="search-dropdown-menu">
                                                    <input type="text" data-action="@Url.Action("FillAccountType", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_account_type_banklist" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                    <i class="feather-icon icon-search"></i>
                                                </div>
                                                <hr>
                                                <ul></ul>
                                            </div>
                                            <span id="nosto_vosto_code_error" class="field-validation-error text-danger" data-valmsg-for="PaymentRightModal.nosto_vosto_code" data-valmsg-replace="true">
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelForRequired(model => model.PaymentRightModal.payment_method, htmlAttributes: new { @class = "control-label col-xs-3" })
                                    <div class="col-xs-6">
                                        <div class="dropdown">
                                            <button class="btn btn-default dropdown-toggle" id="ddl_payment_method_banklist" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                @Html.SpanFor(model => model.PaymentRightModal.payment_method_name, "Select...", new { @class = "selected-data" })
                                                @Html.TextBoxFor(model => model.PaymentRightModal.payment_method, htmlAttributes: new { @class = "selected-value hidden" })
                                                @Html.TextBoxFor(model => model.PaymentRightModal.payment_method_name, htmlAttributes: new { @class = "selected-data hidden" })
                                                <span class="caret"></span>
                                            </button>
                                            <div class="dropdown-menu">
                                                <div class="search-dropdown-menu">
                                                    <input type="text" data-action="@Url.Action("FillPaymentMethod", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_payment_method_banklist" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                    <i class="feather-icon icon-search"></i>
                                                </div>
                                                <hr>
                                                <ul></ul>
                                            </div>
                                            <span id="payment_method_error" class="field-validation-error text-danger" data-valmsg-for="PaymentRightModal.payment_method" data-valmsg-replace="true">
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(model => model.PaymentRightModal.ca_no, htmlAttributes: new { @class = "control-label col-xs-3" })

                                    <div class="col-xs-6">
                                        @Html.EditorForValidate(model => model.PaymentRightModal.ca_no, new { htmlAttributes = new { @class = "form-control ", required = "required" } })
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(model => model.PaymentRightModal.sa_no, htmlAttributes: new { @class = "control-label col-xs-3" })

                                    <div class="col-xs-6">
                                        @Html.EditorForValidate(model => model.PaymentRightModal.sa_no, new { htmlAttributes = new { @class = "form-control ", required = "required" } })
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(model => model.PaymentRightModal.participant_id, htmlAttributes: new { @class = "control-label col-xs-3" })

                                    <div class="col-xs-6">
                                        @Html.EditorForValidate(model => model.PaymentRightModal.participant_id, new { htmlAttributes = new { @class = "form-control ", required = "required" } })
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(model => model.PaymentRightModal.bank_code, htmlAttributes: new { @class = "control-label col-xs-3" })
                                    <div class="col-xs-6">
                                        <div class="dropdown">
                                            <button class="btn btn-default dropdown-toggle" id="ddl_bank_name_banklist" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                @Html.SpanFor(model => model.PaymentRightModal.bank_name, "Select...", new { @class = "selected-data" })
                                                @Html.TextBoxFor(model => model.PaymentRightModal.bank_code, htmlAttributes: new { @class = "selected-value hidden" })
                                                @Html.TextBoxFor(model => model.PaymentRightModal.bank_name, htmlAttributes: new { @class = "selected-data hidden" })
                                                <span class="caret"></span>
                                            </button>
                                            <div class="dropdown-menu">
                                                <div class="search-dropdown-menu">
                                                    <input type="text" data-action="@Url.Action("FillBankName", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_bank_name_banklist" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                    <i class="feather-icon icon-search"></i>
                                                </div>
                                                <hr>
                                                <ul></ul>
                                            </div>
                                            <span id="bank_code_error" class="field-validation-error text-danger" data-valmsg-for="PaymentRightModal.bank_code" data-valmsg-replace="true">
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(model => model.PaymentRightModal.account_number, htmlAttributes: new { @class = "control-label col-xs-3" })
                                    <div class="col-xs-6">
                                        @Html.EditorForValidate(model => model.PaymentRightModal.account_number, new { htmlAttributes = new { @class = "form-control ", required = "required" } })
                                        <span id="account_number_error" class="field-validation-error text-danger" data-valmsg-for="PaymentRightModal.account_number" data-valmsg-replace="true">
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <hr>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <div class="col-xs-offset-3 col-xs-9">
                                        <button class="btn btn-primary btn-round btn-main" id="btnPaymentSave" data-action="" type="button">+ Add Bank List</button>
                                        <button class="btn btn-default btn-round btn-main" id="btnPaymentCancel" data-dismiss="modal">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- modal-content -->
    </div>
    <!-- modal-dialog -->
</div>

<!-- Add Identify - Right Modal -->
<div class="modal right fade" id="modal-form-identify" tabindex="-1" role="dialog" aria-labelledby="edit-modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">
                        <i class="feather-icon icon-x"></i>
                    </span>
                </button>
                <h4 class="modal-title">Add Identify</h4>
            </div>
            <div class="modal-body group">
                <form id="IdentifyForm">
                    <div class="form-container form-horizontal">
                        <div class="row">
                            <div class="col-xs-12 form-wrapper-max">
                                <div class="form-group">
                                    @Html.LabelForRequired(model => model.IdentifyRightModal.unique_id, htmlAttributes: new { @class = "control-label col-xs-3" })
                                    <div class="col-xs-6">
                                        <div class="dropdown">
                                            <button class="btn btn-default dropdown-toggle" id="ddl_unique" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                @Html.SpanFor(model => model.IdentifyRightModal.unique_name, "Select...", new { @class = "selected-data" })
                                                @Html.TextBoxFor(model => model.IdentifyRightModal.unique_id, htmlAttributes: new { @class = "selected-value hidden" })
                                                @Html.TextBoxFor(model => model.IdentifyRightModal.unique_name, htmlAttributes: new { @class = "selected-data hidden" })
                                                <span class="caret"></span>
                                            </button>
                                            <div class="dropdown-menu">
                                                <div class="search-dropdown-menu">
                                                    <input type="text" data-action="@Url.Action("FillUniqeuid", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_unique" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                    <i class="feather-icon icon-search"></i>
                                                </div>
                                                <hr>
                                                <ul id="ul_uniqueid"></ul>
                                            </div>
                                            <span id="unique_id_error" class="field-validation-error text-danger" data-valmsg-replace="true">
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelForRequired(model => model.IdentifyRightModal.identify_type, htmlAttributes: new { @class = "control-label col-xs-3" })
                                    <div class="col-xs-6">
                                        <div class="dropdown">
                                            <button class="btn btn-default dropdown-toggle" id="ddl_identify_type" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                @Html.SpanFor(model => model.IdentifyRightModal.identify_type_text, "Select...", new { @class = "selected-data" })
                                                @Html.TextBoxFor(model => model.IdentifyRightModal.identify_type, htmlAttributes: new { @class = "selected-value hidden" })
                                                @Html.TextBoxFor(model => model.IdentifyRightModal.identify_type_text, htmlAttributes: new { @class = "selected-data hidden" })
                                                <span class="caret"></span>
                                            </button>
                                            <div class="dropdown-menu">
                                                <div class="search-dropdown-menu">
                                                    <input type="text" data-action="@Url.Action("FillIdentify", (string)this.ViewContext.RouteData.Values["controller"])" id="txt_identify_type" class="form-control" placeholder="Search..." aria-describedby="basic-addon1">
                                                    <i class="feather-icon icon-search"></i>
                                                </div>
                                                <hr>
                                                <ul id="ul_identify"></ul>
                                            </div>
                                            <span id="identify_type_error" class="field-validation-error text-danger" data-valmsg-replace="true">
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelForRequired(model => model.IdentifyRightModal.identify_no, htmlAttributes: new { @class = "control-label col-xs-3" })
                                    <div class="col-xs-6">
                                        @Html.EditorForValidate(model => model.IdentifyRightModal.identify_no, new { htmlAttributes = new { @class = "form-control ", required = "required" } })
                                        <span id="identify_no_error" class="field-validation-error text-danger" data-valmsg-replace="true">
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(model => model.IdentifyRightModal.juris_reg_date, htmlAttributes: new { @class = "control-label col-md-3" })
                                    <div class="col-xs-6">
                                        <div class="input-group date">
                                            @Html.EditDateFor(model => model.IdentifyRightModal.juris_reg_date, new { @class = "form-control date-time-picker-weekend" })
                                            <span class="input-group-addon">
                                                <span class="feather-icon icon-calendar-weekend"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(model => model.IdentifyRightModal.reg_bus_ename, htmlAttributes: new { @class = "control-label col-xs-3" })
                                    <div class="col-xs-6">
                                        @Html.EditorForValidate(model => model.IdentifyRightModal.reg_bus_ename, new { htmlAttributes = new { @class = "form-control ", required = "required" } })
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(model => model.IdentifyRightModal.reg_bus_tname, htmlAttributes: new { @class = "control-label col-xs-3" })
                                    <div class="col-xs-6">
                                        @Html.EditorForValidate(model => model.IdentifyRightModal.reg_bus_tname, new { htmlAttributes = new { @class = "form-control ", required = "required" } })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <hr>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <div class="col-xs-offset-3 col-xs-9">
                                        <button class="btn btn-primary btn-round btn-main" id="btnIdentifySave" data-action="" type="button">+ Add Bank List</button>
                                        <button class="btn btn-default btn-round btn-main" id="btnIdentifyCancel" data-dismiss="modal">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- modal-content -->
    </div>
    <!-- modal-dialog -->
</div>

@section Styles {
    @Styles.Render("~/bundles/SweetAlertCss")
}

@section Scripts {
    @Scripts.Render("~/bundles/SweetAlert")

    <script>

         window.onload = function () {
          var ErrorMessage = "@ErrorMessage";
             if (ErrorMessage != "")
             {
                 swal("Error", ErrorMessage, "error");
                 ErrorMessage = "";
            }
        };

        $(document).ready(function () {
            var state = "@Model.statusdata";
            var isUpdate = "@isUpdate";

            if (state != "New" && isUpdate == "False") {
                $('#ddl_counterparty').attr('disabled', 'disabled');
                $('#counter_party_name').attr('disabled', 'disabled');
                $('#fund_code').attr('disabled', 'disabled');
                $('#ddl_title').attr('disabled', 'disabled');
                $('#title_name2').attr('disabled', 'disabled');
                $('#first_name').attr('disabled', 'disabled');
                $('#middle_name').attr('disabled', 'disabled');
                $('#last_name').attr('disabled', 'disabled');
                $('#fund_thainame').attr('disabled', 'disabled');
                $('#fund_engname').attr('disabled', 'disabled');
                $('#bb_firm_acc').attr('disabled', 'disabled');
                $('#ddl_custodian').attr('disabled', 'disabled');
                $('#bic_code_fund').attr('disabled', 'disabled');
                $('#sa_account_no').attr('disabled', 'disabled');
                $('#ca_account_no').attr('disabled', 'disabled');
                $('#ddl_fund_type').attr('disabled', 'disabled');
                $('#tax_id').attr('disabled', 'disabled');
                $('#wth_tax_percent').attr('disabled', 'disabled');
                $('#ddl_margin_type_id_add').attr('disabled', 'disabled');
                $('#ddl_margin_in_type_id_add').attr('disabled', 'disabled');
                $('#ddl_margin_in_term_id_add').attr('disabled', 'disabled');
                $('#threshold').attr('disabled', 'disabled');
                $('[name=borrow_only_flag]').attr('disabled', 'disabled');
                $('[name=except_margin_flag]').attr('disabled', 'disabled');
            }

            $("#btnPaymentSave").click(function () {

                $("#nosto_vosto_code_error").text("");
                $("#payment_method_error").text("");

                var PaymentRightModal_nosto_vosto_code = $('#PaymentRightModal_nosto_vosto_code');
                if (PaymentRightModal_nosto_vosto_code.val().trim() == "") {
                    $("#nosto_vosto_code_error").text("The Account Type field is required.");
                }

                var PaymentRightModal_payment_method = $('#PaymentRightModal_payment_method');
                if (PaymentRightModal_payment_method.val().trim() == "") {
                    $("#payment_method_error").text("The Payment Method field is required.");
                }
            });

            $("#btnIdentifySave").click(function () {

                $("#unique_id_error").text("");
                $("#identify_type_error").text("");
                $("#identify_no_error").text("");

                var IdentifyRightModal_unique_id = $('#IdentifyRightModal_unique_id');
                if (IdentifyRightModal_unique_id.val().trim() == "") {
                    $("#unique_id_error").text("The Unique field is required.");
                }

                var IdentifyRightModal_identify_type = $('#IdentifyRightModal_identify_type');
                if (IdentifyRightModal_identify_type.val().trim() == "") {
                    $("#identify_type_error").text("The Identify Type field is required.");
                }

                var IdentifyRightModal_identify_no = $('#IdentifyRightModal_identify_no');
                IdentifyRightModal_identify_no.removeClass("input-validation-error");
                if (IdentifyRightModal_identify_no.val().trim() == "") {
                    $("#identify_no_error").text("The Identify No field is required.");
                    IdentifyRightModal_identify_no.addClass("input-validation-error");
                }
            });

            $("#NavBar").html($('#NavCounterPartyFund').val());
        });
    </script>
    @Scripts.Render("~/module/counterpartyfundadd")
    @Scripts.Render("~/module/validation")
}