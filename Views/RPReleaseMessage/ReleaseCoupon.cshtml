@model GM.Data.Model.PaymentProcess.RPCouponModel
@{
    ViewBag.Title = "Release";
    Layout = "~/Views/Shared/MainLayout.cshtml";
}

@using (Html.BeginForm("ReleaseMessageCoupon", "RPReleaseMessage", FormMethod.Post, new { @class = "one-col-form", id = "action-form", }))
{@Html.HiddenFor(model => model.release_printed)
<section class="working-content">
    <div class="container-fluid container-fixed">

        <!-- PageTitle -->
        <div class="row row-fixed">
            <div class="col-lg-12 col-fixed">
                <div class="page-title">
                    <div class="breadcrumb-wrap">
                        <ol class="breadcrumb" id="NavBar"></ol>
                    </div>
                    <div class="title">
                        <h1>
                            Repo Release Message Coupon
                        </h1>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Zone -->
        <div class="row row-fixed">
            <div class="col-xs-12 col-fixed">
                <div class="box-content">
                    <div class="box-header">
                        <div class="left-item">
                            <div class="title">
                                <h3>Repo Coupon Detail</h3>
                            </div>
                        </div>
                    </div>
                    <div class="form-container form-horizontal form-compact">
                        <div class="row">
                            <div class="col-xs-12 form-wrapper-1100">
                                <div class="form-group-wrapper mb-0">
                                    @Html.HiddenFor(model => model.trans_deal_type)
                                    @Html.HiddenFor(model => model.counter_party_id)
                                    @Html.HiddenFor(model => model.counter_party_fund_id)
                                    @Html.HiddenFor(model => model.trans_no)
                                    @Html.HiddenFor(model => model.trans_cno)
                                    @Html.HiddenFor(model => model.instrument_id)
                                    @Html.HiddenFor(model => model.ending_par)
                                    @Html.HiddenFor(model => model.unit)
                                    @Html.HiddenFor(model => model.trans_no)

                                    <div class="form-group">
                                        <input id="Txt_trans_cno" type="hidden" name="trans_cno" value="@Model.trans_cno">
                                        @Html.HiddenFor(model => model.instrument_code)
                                        @Html.LabelFor(model => model.instrument_code, htmlAttributes: new { @class = "control-label col-xs-2" })
                                        <div class="col-xs-10">
                                            <p class="form-control-static">
                                                @Model.instrument_code ( @Model.instrument_desc )
                                            </p>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        @Html.HiddenFor(model => model.counter_party_code)
                                        @Html.LabelFor(model => model.counter_party_code, htmlAttributes: new { @class = "control-label col-xs-2" })
                                        <div class="col-xs-10">
                                            @if (Model.counter_party_code != null)
                                            {
                                                <p class="form-control-static">@Model.counter_party_code ( @Model.counter_party_name )</p>
                                            }
                                            else
                                            {
                                                <p class="form-control-static">-</p>
                                            }
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.HiddenFor(model => model.event_date)
                                        @Html.LabelFor(model => model.event_date, htmlAttributes: new { @class = "control-label col-xs-2" })
                                        <div class="col-xs-4">
                                            @if (Model.event_date != null)
                                            {
                                                <p class="form-control-static">@Model.event_date.Value.ToString("dd/MM/yyyy")</p>
                                            }
                                        </div>
                                        @Html.HiddenFor(model => model.payment_date)
                                        @Html.LabelFor(model => model.payment_date, htmlAttributes: new { @class = "control-label col-xs-2" })
                                        <div class="col-xs-4">
                                            @if (Model.payment_date != null)
                                            {
                                                <p class="form-control-static">@Model.payment_date.Value.ToString("dd/MM/yyyy")</p>
                                            }
                                        </div>
                                    </div>

                                    <div class="form-group mb-0">
                                        @Html.HiddenFor(model => model.cur)
                                        @Html.LabelFor(model => model.cur, htmlAttributes: new { @class = "control-label col-xs-2" })
                                        <div class="col-xs-4">
                                            <p class="form-control-static">@Model.cur</p>
                                        </div>

                                        @Html.HiddenFor(model => model.coupon_rate)
                                        @Html.LabelFor(model => model.coupon_rate, htmlAttributes: new { @class = "control-label col-xs-2" })
                                        <div class="col-xs-4">
                                            <p class="form-control-static">@Model.coupon_rate.Value.ToString("N2") %</p>
                                        </div>
                                    </div>

                                    <div class="form-group mb-0">
                                        @Html.LabelFor(model => model.payment_method, htmlAttributes: new { @class = "control-label col-xs-2" })
                                        <div class="col-xs-4">
                                            <div class="input-group" style="width:100%;">
                                                <div class="input-group-btn dropdown" style="width:50%;">
                                                    <input id="Txt_payment_method" type="hidden" name="payment_method" value="@Model.payment_method">
                                                    <button disabled class="btn btn-default dropdown-toggle" style="width:100%" id="ddl_counterparty_payment" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        @if (Model.payment_method != null)
                                                        {
                                                            <span class="selected-data">@Model.payment_method</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="selected-data">-</span>
                                                        }
                                                        <span class="caret"></span>
                                                    </button>
                                                </div>
                                                <div class="input-group-btn dropdown" style="width:50%;">
                                                    <input id="Txt_mt_code" type="hidden" name="mt_code" value="@Model.mt_code">
                                                    <button disabled class="btn btn-default dropdown-toggle" style="width:100%" id="ddl_trans_mt_code" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                        @if (Model.mt_code != null)
                                                        {
                                                            <span class="selected-data">@Model.mt_code</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="selected-data">-</span>
                                                        }
                                                        <span class="caret"></span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <hr>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 form-wrapper-1100">
                                <div class="form-group-wrapper mb-0">
                                    <div class="form-group mb-0">
                                        <label class="control-label col-xs-2">Total Unit</label>
                                        <div class="col-xs-2">
                                            <p class="form-control-static important-text">
                                                @Model.unit.Value.ToString("N2") Unit
                                            </p>
                                        </div>
                                        <label class="control-label col-xs-2">Total AI Amount</label>
                                        <div class="col-xs-2">
                                            <p class="form-control-static important-text"> @Model.interest_amount.Value.ToString("N2") Baht</p>
                                        </div>
                                        <label class="control-label col-xs-2">Total AI Amount ADJ</label>
                                        <div class="col-xs-2">
                                            <p class="form-control-static important-text"> @Model.interest_amount_adj.Value.ToString("N2") Baht</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="rp-portfolio-content">
                    <div class="box-content no-padding">
                        <div class="box-header big-head">
                            <div class="left-item">
                                <div class="title">
                                    <h3>Portfolio</h3>
                                </div>
                            </div>
                        </div>
                        <div id="rpcoupon-detail-form" class="content-container no-padding have-head">
                            <div class="column-fluid-wrapper">
                                <div class="row row-fluid">
                                    <div class="col-xs-12 col-md-4 column-fluid have-line">
                                        <div class="content-sub-title">
                                            <h4>Portfolio : AFS</h4>
                                        </div>

                                        <div class="form-container form-horizontal form-compact">
                                            <div class="form-wrapper-500">
                                                <div class="form-group-wrapper mb-0">
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_AFS.unit)
                                                        @Html.LabelFor(model => model.Port_AFS.unit, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_AFS.unit.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_AFS.interest_amount)
                                                        @Html.LabelFor(model => model.Port_AFS.interest_amount, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_AFS.interest_amount.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.Port_AFS.interest_amount_adj, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_AFS.interest_amount_adj.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_AFS.wht_int_amount)
                                                        @Html.LabelFor(model => model.Port_AFS.wht_int_amount, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_AFS.wht_int_amount.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.Port_AFS.wht_int_amount_adj, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_AFS.wht_int_amount_adj.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-md-4 column-fluid have-line">
                                        <div class="content-sub-title">
                                            <h4>Portfolio : HTM</h4>
                                        </div>

                                        <div class="form-container form-horizontal form-compact">
                                            <div class="form-wrapper-500">
                                                <div class="form-group-wrapper mb-0">
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_HTM.unit)
                                                        @Html.LabelFor(model => model.Port_HTM.unit, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_HTM.unit.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_HTM.interest_amount)
                                                        @Html.LabelFor(model => model.Port_HTM.interest_amount, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_HTM.interest_amount.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.Port_HTM.interest_amount_adj, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_HTM.interest_amount_adj.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_HTM.wht_int_amount)
                                                        @Html.LabelFor(model => model.Port_HTM.wht_int_amount, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_HTM.wht_int_amount.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.Port_HTM.wht_int_amount_adj, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_HTM.wht_int_amount_adj.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-md-4 column-fluid have-line">
                                        <div class="content-sub-title">
                                            <h4>Portfolio : TRD</h4>
                                        </div>

                                        <div class="form-container form-horizontal form-compact">
                                            <div class="form-wrapper-500">
                                                <div class="form-group-wrapper mb-0">
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_TRD.unit)
                                                        @Html.LabelFor(model => model.Port_TRD.unit, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_TRD.unit.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_TRD.interest_amount)
                                                        @Html.LabelFor(model => model.Port_TRD.interest_amount, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_TRD.interest_amount.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.Port_TRD.interest_amount_adj, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_TRD.interest_amount_adj.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_TRD.wht_int_amount)
                                                        @Html.LabelFor(model => model.Port_TRD.wht_int_amount, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_TRD.wht_int_amount.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.Port_TRD.wht_int_amount_adj, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_TRD.wht_int_amount_adj.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row row-fluid">
                                    <div class="col-xs-12 col-md-4 column-fluid have-line" style="border-top: 1px solid #cfdae7;">
                                        <div class="content-sub-title">
                                            <h4>Portfolio : MEMO-BNK</h4>
                                        </div>

                                        <div class="form-container form-horizontal form-compact">
                                            <div class="form-wrapper-500">
                                                <div class="form-group-wrapper mb-0">
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_MEMO_BNK.unit)
                                                        @Html.LabelFor(model => model.Port_MEMO_BNK.unit, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_MEMO_BNK.unit.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_MEMO_BNK.interest_amount)
                                                        @Html.LabelFor(model => model.Port_MEMO_BNK.interest_amount, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_MEMO_BNK.interest_amount.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.Port_MEMO_BNK.interest_amount_adj, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_MEMO_BNK.interest_amount_adj.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_MEMO_BNK.wht_int_amount)
                                                        @Html.LabelFor(model => model.Port_MEMO_BNK.wht_int_amount, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_MEMO_BNK.wht_int_amount.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.Port_MEMO_BNK.wht_int_amount_adj, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_MEMO_BNK.wht_int_amount_adj.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-md-4 column-fluid have-line" style="border-top: 1px solid #cfdae7;">
                                        <div class="content-sub-title">
                                            <h4>Portfolio : MEMO-TRD</h4>
                                        </div>

                                        <div class="form-container form-horizontal form-compact">
                                            <div class="form-wrapper-500">
                                                <div class="form-group-wrapper mb-0">
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_MEMO_TRD.unit)
                                                        @Html.LabelFor(model => model.Port_MEMO_TRD.unit, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_MEMO_TRD.unit.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_MEMO_TRD.interest_amount)
                                                        @Html.LabelFor(model => model.Port_MEMO_TRD.interest_amount, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_MEMO_TRD.interest_amount.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.Port_MEMO_TRD.interest_amount_adj, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_MEMO_TRD.interest_amount_adj.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.HiddenFor(model => model.Port_MEMO_TRD.wht_int_amount)
                                                        @Html.LabelFor(model => model.Port_MEMO_TRD.wht_int_amount, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_MEMO_TRD.wht_int_amount.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        @Html.LabelFor(model => model.Port_MEMO_TRD.wht_int_amount_adj, htmlAttributes: new { @class = "control-label col-xs-4" })
                                                        <div class="col-xs-8">
                                                            <p class="form-control-static">@Model.Port_MEMO_TRD.wht_int_amount_adj.ToString("N2")</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-md-4 column-fluid have-line" style="border-top: 1px solid #cfdae7;">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="box-content">
                    <div class="form-container form-horizontal form-compact">
                        <div class="row">
                            <div class="col-xs-12 form-wrapper-1100">
                                <div class="form-group-wrapper mb-0">
                                    <div class="form-group">
                                        @Html.LabelFor(model => model.remark, htmlAttributes: new { @class = "control-label col-xs-2" })
                                        <div class="col-xs-10">
                                            @Html.TextAreaFor(model => model.remark, new { @class = "form-control", rows = "5", disabled = "disabled", @readonly = "readonly" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="deal-submit" class="page-button-submit page-submit-d1">
                    <input id="Hid_Previous" type="hidden" name="Previous" value="@Model.btn_Previous">
                    <button class="btn btn-primary btn-round btn-big" type="button" id="Btn_Previous" form-mode="previous" onclick="GM.RPReleaseMessage.Previous(this)">
                        previous
                    </button>
                    <button class="btn btn-success btn-round btn-big" type="button" id="Btn_Approve" form-mode="release" onclick="GM.RPReleaseMessage.Release(this)" @(!IsUpdate ? "disabled" : "")>
                        gen release
                    </button>
                    <button class="btn btn-warning btn-round btn-big" type="button" id="Btn_Back">
                        Back
                    </button>
                    <input id="Hid_Next" type="hidden" name="Next" value="@Model.btn_Next">
                    <button class="btn btn-primary btn-round btn-big" type="button" id="Btn_Next" form-mode="next" onclick="GM.RPReleaseMessage.Next(this)">
                        Next
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>
}
@section Styles {
    @Styles.Render("~/bundles/SweetAlertCss")
    @Styles.Render("~/content/datatable")


}

@section Scripts {
    @Scripts.Render("~/bundles/datatable")
    @Scripts.Render("~/bundles/SweetAlert")
    <script>
        $(document).ready(function () {

            $("#NavBar").html($('#NavRPReleaseMessage').val());

            //Function : Btn Previous =====================================
            var Hid_Previous = $('#Hid_Previous');
            if (Hid_Previous.val() == false) {
                $('#Btn_Previous').prop('disabled', true);
            }
            else {
                $('#Btn_Previous').prop('disabled', false);
            }

            GM.RPReleaseMessage = {};
            GM.RPReleaseMessage.Previous = function (btn) {
                var mode = $(btn).attr("form-mode");
                GM.Message.Clear();
                window.location.href = "\@Url.Action("PreviousCoupon", (string)this.ViewContext.RouteData.Values["controller"])" + "?id=" + $('#Txt_trans_cno').html();
            };

            //Function : Btn Next =====================================
            var Hid_Next = $('#Hid_Next');
            if (Hid_Next.val() == false) {
                $('#Btn_Next').prop('disabled', true);
            }
            else {
                $('#Btn_Next').prop('disabled', false);
            }

            GM.RPReleaseMessage.Next = function (btn) {
                var mode = $(btn).attr("form-mode");
                GM.Message.Clear();
                window.location.href = "\@Url.Action("NextCoupon", (string)this.ViewContext.RouteData.Values["controller"])" + "?id=" + $('#Txt_trans_cno').html();
            };

            //Function : Btn Release =====================================
            GM.RPReleaseMessage.Release = function (btn) {

                var msg = "Comfirm ReleaseMessage?";
                if ($('#release_printed').val() == 'Y') {
                    msg = "Message already released, do you want to release again?";
                }

            swal({
                title: msg,
                text: "",
                type: "warning",
                showCancelButton: true,
                confirmButtonClass: "btn-danger",
                confirmButtonText: "Yes",
                cancelButtonText: "No",
                closeOnConfirm: true,
                closeOnCancel: true
            },
                function (isConfirm) {
                    if (isConfirm) {
                        $('.spinner').css('display', 'block'); // Open Loading
                        GM.Message.Clear();
                        var dataToPost = $("#action-form").serialize();
                        $.post("ReleaseMessageCoupon", dataToPost)
                            .done(function (response) {
                                $('.spinner').css('display', 'none'); // Close Loading
                                GM.Unmask();
                                console.log(response);
                                if (response[0].Message == "") {
                                    if (response[0].trans_cno != "") {
                                        swal({
                                            title: "Complete",
                                            text: "Release Message Success",
                                            type: "success",
                                            showCancelButton: false,
                                            confirmButtonClass: "btn-success",
                                            confirmButtonText: "Ok",
                                            closeOnConfirm: true,
                                        },
                                            function (isConfirm) {
                                                if (isConfirm) {
                                                    console.log("Release");
                                                    window.location.href = "\@Url.Action("ReleaseCoupon", (string)this.ViewContext.RouteData.Values["controller"])" + "?trans_cno=" + response[0].trans_cno;
                                                }
                                            }
                                        );
                                    }
                                    else {
                                        swal({
                                            title: "Complete",
                                            text: "Release Message Success",
                                            type: "success",
                                            showCancelButton: false,
                                            confirmButtonClass: "btn-danger",
                                            confirmButtonText: "Ok",
                                            closeOnConfirm: true,
                                        },
                                            function (isConfirm) {
                                                if (isConfirm) {
                                                    console.log("Index");
                                                    window.location.href = "\@Url.Action("IndexCoupon", (string)this.ViewContext.RouteData.Values["controller"])";
                                                }
                                            }
                                        );
                                    }
                                }
                                else {
                                    GM.Message.Error('.modal-body', response[0].Message);
                                    swal("Fail", response[0].Message, "error");
                                }
                            })
                    } else {
                        GM.Message.Clear();
                    }
                });
            };

            $('#Btn_Back').click(function (e) {
                 window.location.href = "\@Url.Action("IndexCoupon", (string)this.ViewContext.RouteData.Values["controller"])";
            });

        });

    </script>
    @*@Scripts.Render("~/module/rpcouponadd")*@
    @Scripts.RenderFormat("<script type=\"text/javascript\" src=\"{0}?nocache=" + DateTime.Now.ToString("ddmmyyyyHHmmss") + "\"></script>", "~/module/rpcouponadd")
}